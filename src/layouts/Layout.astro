---
import "../styles/global.css";

const {
  title = "Cotalizer | Orçamentos com IA rápidos e padronizados",
  description = "Crie orçamentos profissionais com IA, PDF pronto, templates e trilha de auditoria no Cotalizer.",
} = Astro.props;
---

<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <meta name="description" content={description} />
    <meta name="generator" content={Astro.generator} />
    <link rel="icon" type="image/png" href="/image_1-removebg-preview.png" />
    <title>{title}</title>
    <slot name="head" />
  </head>
  <body class="bg-[#0f1729] text-white antialiased">
    <slot />
    <script is:inline>
      const GA_ID = "G-J65ZEN11Q9";
      let loaded = false;

      function loadGA() {
        if (loaded) return;
        loaded = true;

        const s = document.createElement("script");
        s.src = `https://www.googletagmanager.com/gtag/js?id=${GA_ID}`;
        s.async = true;
        document.head.appendChild(s);

        window.dataLayer = window.dataLayer || [];
        function gtag() {
          dataLayer.push(arguments);
        }
        gtag("js", new Date());
        gtag("config", GA_ID);
      }

      const trigger = () => {
        loadGA();
        window.removeEventListener("scroll", trigger);
        window.removeEventListener("pointerdown", trigger);
        window.removeEventListener("keydown", trigger);
      };

      window.addEventListener("scroll", trigger, { passive: true, once: true });
      window.addEventListener("pointerdown", trigger, { once: true });
      window.addEventListener("keydown", trigger, { once: true });
    </script>
  </body>
</html>
