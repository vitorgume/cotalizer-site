---
import '../styles/global.css';

const {
  title = 'Cotalizer | Orçamentos com IA rápidos e padronizados',
  description = 'Crie orçamentos profissionais com IA, PDF pronto, templates e trilha de auditoria no Cotalizer.',
} = Astro.props;
---

<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <meta name="description" content={description} />
    <meta name="generator" content={Astro.generator} />
    <link rel="icon" type="image/png" href="/image_1-removebg-preview.png" />
    <title>{title}</title>
    <slot name="head" />
  </head>
  <body class="bg-[#0f1729] text-white antialiased">
    <slot />
    <script is:inline>
      // Adia o carregamento do GA para depois do carregamento inicial e libera a thread principal
      const GA_ID = 'G-J65ZEN11Q9';
      const loadGA = () => {
        if (window.__gaLoaded) return;
        window.__gaLoaded = true;
        const script = document.createElement('script');
        script.src = `https://www.googletagmanager.com/gtag/js?id=${GA_ID}`;
        script.async = true;
        script.onload = () => {
          window.dataLayer = window.dataLayer || [];
          function gtag() { dataLayer.push(arguments); }
          gtag('js', new Date());
          gtag('config', GA_ID);
        };
        document.head.appendChild(script);
      };
      window.addEventListener('load', () => {
        if ('requestIdleCallback' in window) {
          requestIdleCallback(loadGA, { timeout: 3000 });
        } else {
          setTimeout(loadGA, 1500);
        }
      });
    </script>
  </body>
</html>
